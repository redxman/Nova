/*! jQuery UI - v1.11.4+CommonJS - 2015-08-28
* http://jqueryui.com
* Includes: widget.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(jQuery)})(function(n){
/*!
 * jQuery UI Widget 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
var i=0,t=Array.prototype.slice,r;n.cleanData=function(t){return function(i){for(var r,u,f=0;(u=i[f])!=null;f++)try{r=n._data(u,"events");r&&r.remove&&n(u).triggerHandler("remove")}catch(e){}t(i)}}(n.cleanData);n.widget=function(t,i,r){var s,f,u,o,h={},e=t.split(".")[0];return t=t.split(".")[1],s=e+"-"+t,r||(r=i,i=n.Widget),n.expr[":"][s.toLowerCase()]=function(t){return!!n.data(t,s)},n[e]=n[e]||{},f=n[e][t],u=n[e][t]=function(n,t){if(!this._createWidget)return new u(n,t);arguments.length&&this._createWidget(n,t)},n.extend(u,f,{version:r.version,_proto:n.extend({},r),_childConstructors:[]}),o=new i,o.options=n.widget.extend({},o.options),n.each(r,function(t,r){if(!n.isFunction(r)){h[t]=r;return}h[t]=function(){var n=function(){return i.prototype[t].apply(this,arguments)},u=function(n){return i.prototype[t].apply(this,n)};return function(){var i=this._super,f=this._superApply,t;return this._super=n,this._superApply=u,t=r.apply(this,arguments),this._super=i,this._superApply=f,t}}()}),u.prototype=n.widget.extend(o,{widgetEventPrefix:f?o.widgetEventPrefix||t:t},h,{constructor:u,namespace:e,widgetName:t,widgetFullName:s}),f?(n.each(f._childConstructors,function(t,i){var r=i.prototype;n.widget(r.namespace+"."+r.widgetName,u,i._proto)}),delete f._childConstructors):i._childConstructors.push(u),n.widget.bridge(t,u),u};n.widget.extend=function(i){for(var e=t.call(arguments,1),f=0,o=e.length,r,u;f<o;f++)for(r in e[f])u=e[f][r],e[f].hasOwnProperty(r)&&u!==undefined&&(i[r]=n.isPlainObject(u)?n.isPlainObject(i[r])?n.widget.extend({},i[r],u):n.widget.extend({},u):u);return i};n.widget.bridge=function(i,r){var u=r.prototype.widgetFullName||i;n.fn[i]=function(f){var s=typeof f=="string",o=t.call(arguments,1),e=this;return s?this.each(function(){var t,r=n.data(this,u);return f==="instance"?(e=r,!1):r?!n.isFunction(r[f])||f.charAt(0)==="_"?n.error("no such method '"+f+"' for "+i+" widget instance"):(t=r[f].apply(r,o),t!==r&&t!==undefined?(e=t&&t.jquery?e.pushStack(t.get()):t,!1):void 0):n.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+f+"'")}):(o.length&&(f=n.widget.extend.apply(null,[f].concat(o))),this.each(function(){var t=n.data(this,u);t?(t.option(f||{}),t._init&&t._init()):n.data(this,u,new r(f,this))})),e}};n.Widget=function(){};n.Widget._childConstructors=[];n.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=n(r||this.defaultElement||this)[0];this.element=n(r);this.uuid=i++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=n();this.hoverable=n();this.focusable=n();r!==this&&(n.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(n){n.target===r&&this.destroy()}}),this.document=n(r.style?r.ownerDocument:r.document||r),this.window=n(this.document[0].defaultView||this.document[0].parentWindow));this.options=n.widget.extend({},this.options,this._getCreateOptions(),t);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:n.noop,_getCreateEventData:n.noop,_create:n.noop,_init:n.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(n.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:n.noop,widget:function(){return this.element},option:function(t,i){var e=t,r,u,f;if(arguments.length===0)return n.widget.extend({},this.options);if(typeof t=="string")if(e={},r=t.split("."),t=r.shift(),r.length){for(u=e[t]=n.widget.extend({},this.options[t]),f=0;f<r.length-1;f++)u[r[f]]=u[r[f]]||{},u=u[r[f]];if(t=r.pop(),arguments.length===1)return u[t]===undefined?null:u[t];u[t]=i}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];e[t]=i}return this._setOptions(e),this},_setOptions:function(n){for(var t in n)this._setOption(t,n[t]);return this},_setOption:function(n,t){return this.options[n]=t,n==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,r){var f,u=this;typeof t!="boolean"&&(r=i,i=t,t=!1);r?(i=f=n(i),this.bindings=this.bindings.add(i)):(r=i,i=this.element,f=this.widget());n.each(r,function(r,e){function o(){if(t||u.options.disabled!==!0&&!n(this).hasClass("ui-state-disabled"))return(typeof e=="string"?u[e]:e).apply(u,arguments)}typeof e!="string"&&(o.guid=e.guid=e.guid||o.guid||n.guid++);var s=r.match(/^([\w:-]*)\s*(.*)$/),h=s[1]+u.eventNamespace,c=s[2];c?f.delegate(c,h,o):i.bind(h,o)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;t.unbind(i).undelegate(i);this.bindings=n(this.bindings.not(t).get());this.focusable=n(this.focusable.not(t).get());this.hoverable=n(this.hoverable.not(t).get())},_delay:function(n,t){function r(){return(typeof n=="string"?i[n]:n).apply(i,arguments)}var i=this;return setTimeout(r,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t);this._on(t,{mouseenter:function(t){n(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){n(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t);this._on(t,{focusin:function(t){n(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){n(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var u,f,e=this.options[t];if(r=r||{},i=n.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],f=i.originalEvent,f)for(u in f)u in i||(i[u]=f[u]);return this.element.trigger(i,r),!(n.isFunction(e)&&e.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}};n.each({show:"fadeIn",hide:"fadeOut"},function(t,i){n.Widget.prototype["_"+t]=function(r,u,f){typeof u=="string"&&(u={effect:u});var o,e=u?u===!0||typeof u=="number"?i:u.effect||i:t;u=u||{};typeof u=="number"&&(u={duration:u});o=!n.isEmptyObject(u);u.complete=f;u.delay&&r.delay(u.delay);o&&n.effects&&n.effects.effect[e]?r[t](u):e!==t&&r[e]?r[e](u.duration,u.easing,f):r.queue(function(i){n(this)[t]();f&&f.call(r[0]);i()})}});r=n.widget}),function(n){"use strict";var t=function(n,i){var r=/[^\w\-.:]/.test(n)?new Function(t.arg+",tmpl","var _e=tmpl.encode"+t.helper+",_s='"+n.replace(t.regexp,t.func)+"';return _s;"):t.cache[n]=t.cache[n]||t(t.load(n));return i?r(i,t):function(n){return r(n,t)}};t.cache={};t.load=function(n){return document.getElementById(n).innerHTML};t.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;t.func=function(n,t,i,r,u,f){return t?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[t]||"\\"+t:i?i==="="?"'+_e("+r+")+'":"'+("+r+"==null?'':"+r+")+'":u?"';":f?"_s+='":void 0};t.encReg=/[<>&"'\x00]/g;t.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};t.encode=function(n){return(n==null?"":""+n).replace(t.encReg,function(n){return t.encMap[n]||""})};t.arg="o";t.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}";typeof define=="function"&&define.amd?define(function(){return t}):typeof module=="object"&&module.exports?module.exports=t:n.tmpl=t}(this);!function(n){"use strict";function t(n,i,r){var f,u=document.createElement("img");return u.onerror=function(f){return t.onerror(u,f,n,i,r)},u.onload=function(f){return t.onload(u,f,n,i,r)},"string"==typeof n?(t.fetchBlob(n,function(i){i?(n=i,f=t.createObjectURL(n)):(f=n,r&&r.crossOrigin&&(u.crossOrigin=r.crossOrigin));u.src=f},r),u):t.isInstanceOf("Blob",n)||t.isInstanceOf("File",n)?(f=u._objectURL=t.createObjectURL(n))?(u.src=f,u):t.readFile(n,function(n){var t=n.target;t&&t.result?u.src=t.result:i&&i(n)}):void 0}function r(n,i){!n._objectURL||i&&i.noRevoke||(t.revokeObjectURL(n._objectURL),delete n._objectURL)}var i=n.createObjectURL&&n||n.URL&&URL.revokeObjectURL&&URL||n.webkitURL&&webkitURL;t.fetchBlob=function(n,t){t()};t.isInstanceOf=function(n,t){return Object.prototype.toString.call(t)==="[object "+n+"]"};t.transform=function(n,t,i,r,u){i(n,u)};t.onerror=function(n,t,i,u,f){r(n,f);u&&u.call(n,t)};t.onload=function(n,i,u,f,e){r(n,e);f&&t.transform(n,e,f,u,{})};t.createObjectURL=function(n){return!!i&&i.createObjectURL(n)};t.revokeObjectURL=function(n){return!!i&&i.revokeObjectURL(n)};t.readFile=function(t,i,r){if(n.FileReader){var u=new FileReader;if(u.onload=u.onerror=i,r=r||"readAsDataURL",u[r])return u[r](t),u}return!1};"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:n.loadImage=t}("undefined"!=typeof window&&window||this),function(n){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],n):n("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(n){"use strict";var t=n.transform;n.transform=function(i,r,u,f,e){t.call(n,n.scale(i,r,e),r,u,f,e)};n.transformCoordinates=function(){};n.getTransformedOptions=function(n,t){var i,r,u,f,e=t.aspectRatio;if(!e)return t;i={};for(r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);return i.crop=!0,u=n.naturalWidth||n.width,f=n.naturalHeight||n.height,u/f>e?(i.maxWidth=f*e,i.maxHeight=f):(i.maxWidth=u,i.maxHeight=u/e),i};n.renderImageToCanvas=function(n,t,i,r,u,f,e,o,s,h){return n.getContext("2d").drawImage(t,i,r,u,f,e,o,s,h),n};n.hasCanvasOption=function(n){return n.canvas||n.crop||!!n.aspectRatio};n.scale=function(t,i,r){function g(){var n=Math.max((p||o)/o,(w||s)/s);n>1&&(o*=n,s*=n)}function nt(){var n=Math.min((h||o)/o,(c||s)/s);n<1&&(o*=n,s*=n)}i=i||{};var h,c,p,w,u,f,l,a,v,y,tt,e=document.createElement("canvas"),d=t.getContext||n.hasCanvasOption(i)&&e.getContext,b=t.naturalWidth||t.width,k=t.naturalHeight||t.height,o=b,s=k;if(d&&(l=(i=n.getTransformedOptions(t,i,r)).left||0,a=i.top||0,i.sourceWidth?(u=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(l=b-u-i.right)):u=b-l-(i.right||0),i.sourceHeight?(f=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(a=k-f-i.bottom)):f=k-a-(i.bottom||0),o=u,s=f),h=i.maxWidth,c=i.maxHeight,p=i.minWidth,w=i.minHeight,d&&h&&c&&i.crop?(o=h,s=c,(tt=u/f-h/c)<0?(f=c*u/h,void 0===i.top&&void 0===i.bottom&&(a=(k-f)/2)):tt>0&&(u=h*f/c,void 0===i.left&&void 0===i.right&&(l=(b-u)/2))):((i.contain||i.cover)&&(p=h=h||p,w=c=c||w),i.cover?(nt(),g()):(g(),nt())),d){if((v=i.pixelRatio)>1&&(e.style.width=o+"px",e.style.height=s+"px",o*=v,s*=v,e.getContext("2d").scale(v,v)),(y=i.downsamplingRatio)>0&&y<1&&o<u&&s<f)for(;u*y>o;)e.width=u*y,e.height=f*y,n.renderImageToCanvas(e,t,l,a,u,f,0,0,e.width,e.height),l=0,a=0,u=e.width,f=e.height,(t=document.createElement("canvas")).width=u,t.height=f,n.renderImageToCanvas(t,e,0,0,u,f,0,0,u,f);return e.width=o,e.height=s,n.transformCoordinates(e,i),n.renderImageToCanvas(e,t,l,a,u,f,0,0,o,s)}return t.width=o,t.height=s,t}}),function(n){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],n):n("object"==typeof module&&module.exports?require("./load-image"):window.loadImage)}(function(n){"use strict";var i="undefined"!=typeof Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t;n.blobSlice=i&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)};n.metaDataParsers={jpeg:{65505:[]}};n.parseMetaData=function(t,i,r,u){r=r||{};u=u||{};var f=this,e=r.maxMetaDataSize||262144;!!("undefined"!=typeof DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&n.blobSlice)&&n.readFile(n.blobSlice.call(t,0,e),function(t){if(t.target.error)return console.log(t.target.error),void i(u);var s,h,v,c,l=t.target.result,o=new DataView(l),e=2,y=o.byteLength-4,a=e;if(65496===o.getUint16(0)){for(;e<y&&((s=o.getUint16(e))>=65504&&s<=65519||65534===s);){if(h=o.getUint16(e+2)+2,e+h>o.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(v=n.metaDataParsers.jpeg[s])for(c=0;c<v.length;c+=1)v[c].call(f,o,e,h,u,r);a=e+=h}!r.disableImageHead&&a>6&&(u.imageHead=l.slice?l.slice(0,a):new Uint8Array(l).subarray(0,a))}else console.log("Invalid JPEG file: Missing JPEG marker.");i(u)},"readAsArrayBuffer")||i(u)};n.hasMetaOption=function(n){return n&&n.meta};t=n.transform;n.transform=function(i,r,u,f,e){n.hasMetaOption(r)?n.parseMetaData(f,function(e){t.call(n,i,r,u,f,e)},r,e):t.apply(n,arguments)}}),function(n){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],n):"object"==typeof module&&module.exports?n(require("./load-image"),require("./load-image-meta")):n(window.loadImage)}(function(n){"use strict";"undefined"!=typeof fetch&&"undefined"!=typeof Request&&(n.fetchBlob=function(t,i,r){if(n.hasMetaOption(r))return fetch(new Request(t,r)).then(function(n){return n.blob()}).then(i).catch(function(n){console.log(n);i()});i()})}),function(n){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],n):"object"==typeof module&&module.exports?n(require("./load-image"),require("./load-image-meta")):n(window.loadImage)}(function(n){"use strict";n.ExifMap=function(){return this};n.ExifMap.prototype.map={Orientation:274};n.ExifMap.prototype.get=function(n){return this[n]||this[this.map[n]]};n.getExifThumbnail=function(n,t,i){var u,r,f;if(i&&!(t+i>n.byteLength)){for(u=[],r=0;r<i;r+=1)f=n.getUint8(t+r),u.push((f<16?"0":"")+f.toString(16));return"data:image/jpeg,%"+u.join("%")}console.log("Invalid Exif data: Invalid thumbnail data.")};n.exifTagTypes={1:{getValue:function(n,t){return n.getUint8(t)},size:1},2:{getValue:function(n,t){return String.fromCharCode(n.getUint8(t))},size:1,ascii:!0},3:{getValue:function(n,t,i){return n.getUint16(t,i)},size:2},4:{getValue:function(n,t,i){return n.getUint32(t,i)},size:4},5:{getValue:function(n,t,i){return n.getUint32(t,i)/n.getUint32(t+4,i)},size:8},9:{getValue:function(n,t,i){return n.getInt32(t,i)},size:4},10:{getValue:function(n,t,i){return n.getInt32(t,i)/n.getInt32(t+4,i)},size:8}};n.exifTagTypes[7]=n.exifTagTypes[1];n.getExifValue=function(t,i,r,u,f,e){var c,l,h,o,a,v,s=n.exifTagTypes[u];if(s){if(c=s.size*f,!((l=c>4?i+t.getUint32(r+8,e):r+8)+c>t.byteLength)){if(1===f)return s.getValue(t,l,e);for(h=[],o=0;o<f;o+=1)h[o]=s.getValue(t,l+o*s.size,e);if(s.ascii){for(a="",o=0;o<h.length&&"\0"!==(v=h[o]);o+=1)a+=v;return a}return h}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")};n.parseExifTag=function(t,i,r,u,f){var e=t.getUint16(r,u);f.exif[e]=n.getExifValue(t,i,r,t.getUint16(r+2,u),t.getUint32(r+4,u),u)};n.parseExifTags=function(n,t,i,r,u){var e,o,f;if(i+6>n.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(e=n.getUint16(i,r),!((o=i+2+12*e)+4>n.byteLength)){for(f=0;f<e;f+=1)this.parseExifTag(n,t,i+2+12*f,r,u);return n.getUint32(o,r)}console.log("Invalid Exif data: Invalid directory size.")}};n.parseExifData=function(t,i,r,u,f){if(!f.disableExif){var o,s,h,e=i+10;if(1165519206===t.getUint32(i+4))if(e+8>t.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===t.getUint16(i+8)){switch(t.getUint16(e)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===t.getUint16(e+2,o)?(s=t.getUint32(e+4,o),u.exif=new n.ExifMap,(s=n.parseExifTags(t,e,e+s,o,u))&&!f.disableExifThumbnail&&(h={exif:{}},s=n.parseExifTags(t,e,e+s,o,h),h.exif[513]&&(u.exif.Thumbnail=n.getExifThumbnail(t,e+h.exif[513],h.exif[514]))),u.exif[34665]&&!f.disableExifSub&&n.parseExifTags(t,e,e+u.exif[34665],o,u),u.exif[34853]&&!f.disableExifGps&&n.parseExifTags(t,e,e+u.exif[34853],o,u)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}};n.metaDataParsers.jpeg[65505].push(n.parseExifData)}),function(n){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-exif"],n):"object"==typeof module&&module.exports?n(require("./load-image"),require("./load-image-exif")):n(window.loadImage)}(function(n){"use strict";n.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"};n.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}};n.ExifMap.prototype.getText=function(n){var t=this.get(n);switch(n){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[n][t];case"ExifVersion":case"FlashpixVersion":return t?String.fromCharCode(t[0],t[1],t[2],t[3]):void 0;case"ComponentsConfiguration":return t?this.stringValues[n][t[0]]+this.stringValues[n][t[1]]+this.stringValues[n][t[2]]+this.stringValues[n][t[3]]:void 0;case"GPSVersionID":return t?t[0]+"."+t[1]+"."+t[2]+"."+t[3]:void 0}return String(t)},function(n){var t,i=n.tags,r=n.map;for(t in i)i.hasOwnProperty(t)&&(r[i[t]]=t)}(n.ExifMap.prototype);n.ExifMap.prototype.getAll=function(){var n,t,i={};for(n in this)this.hasOwnProperty(n)&&(t=this.tags[n])&&(i[t]=this.getText(t));return i}}),function(n){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-scale","./load-image-meta"],n):"object"==typeof module&&module.exports?n(require("./load-image"),require("./load-image-scale"),require("./load-image-meta")):n(window.loadImage)}(function(n){"use strict";var t=n.hasCanvasOption,i=n.hasMetaOption,r=n.transformCoordinates,u=n.getTransformedOptions;n.hasCanvasOption=function(i){return!!i.orientation||t.call(n,i)};n.hasMetaOption=function(t){return t&&!0===t.orientation||i.call(n,t)};n.transformCoordinates=function(t,i){r.call(n,t,i);var u=t.getContext("2d"),f=t.width,e=t.height,s=t.style.width,h=t.style.height,o=i.orientation;if(o&&!(o>8))switch(o>4&&(t.width=e,t.height=f,t.style.width=h,t.style.height=s),o){case 2:u.translate(f,0);u.scale(-1,1);break;case 3:u.translate(f,e);u.rotate(Math.PI);break;case 4:u.translate(0,e);u.scale(1,-1);break;case 5:u.rotate(.5*Math.PI);u.scale(1,-1);break;case 6:u.rotate(.5*Math.PI);u.translate(0,-e);break;case 7:u.rotate(.5*Math.PI);u.translate(f,-e);u.scale(-1,1);break;case 8:u.rotate(-.5*Math.PI);u.translate(-f,0)}};n.getTransformedOptions=function(t,i,r){var f,s,e=u.call(n,t,i),o=e.orientation;if(!0===o&&r&&r.exif&&(o=r.exif.get("Orientation")),!o||o>8||1===o)return e;f={};for(s in e)e.hasOwnProperty(s)&&(f[s]=e[s]);switch(f.orientation=o,o){case 2:f.left=e.right;f.right=e.left;break;case 3:f.left=e.right;f.top=e.bottom;f.right=e.left;f.bottom=e.top;break;case 4:f.top=e.bottom;f.bottom=e.top;break;case 5:f.left=e.top;f.top=e.left;f.right=e.bottom;f.bottom=e.right;break;case 6:f.left=e.top;f.top=e.right;f.right=e.bottom;f.bottom=e.left;break;case 7:f.left=e.bottom;f.top=e.right;f.right=e.top;f.bottom=e.left;break;case 8:f.left=e.bottom;f.top=e.left;f.right=e.top;f.bottom=e.right}return f.orientation>4&&(f.maxWidth=e.maxHeight,f.maxHeight=e.maxWidth,f.minWidth=e.minHeight,f.minHeight=e.minWidth,f.sourceWidth=e.sourceHeight,f.sourceHeight=e.sourceWidth),f}}),function(n){"use strict";var i=n.HTMLCanvasElement&&n.HTMLCanvasElement.prototype,r=n.Blob&&function(){try{return Boolean(new Blob)}catch(n){return!1}}(),f=r&&n.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(n){return!1}}(),u=n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder||n.MSBlobBuilder,e=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,t=(r||u)&&n.atob&&n.ArrayBuffer&&n.Uint8Array&&function(n){var t,h,v,c,o,s,l,i,a;if(t=n.match(e),!t)throw new Error("invalid data URI");for(h=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),v=!!t[4],c=n.slice(t[0].length),o=v?atob(c):decodeURIComponent(c),s=new ArrayBuffer(o.length),l=new Uint8Array(s),i=0;i<o.length;i+=1)l[i]=o.charCodeAt(i);return r?new Blob([f?l:s],{type:h}):(a=new u,a.append(s),a.getBlob(h))};n.HTMLCanvasElement&&!i.toBlob&&(i.mozGetAsFile?i.toBlob=function(n,r,u){var f=this;setTimeout(function(){u&&i.toDataURL&&t?n(t(f.toDataURL(r,u))):n(f.mozGetAsFile("blob",r))})}:i.toDataURL&&t&&(i.toBlob=function(n,i,r){var u=this;setTimeout(function(){n(t(u.toDataURL(i,r)))})}));typeof define=="function"&&define.amd?define(function(){return t}):typeof module=="object"&&module.exports?module.exports=t:n.dataURLtoBlob=t}(window),function(n){"use strict";typeof define=="function"&&define.amd?define(["./blueimp-helper"],n):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=n(window.blueimp.helper||window.jQuery))}(function(n){"use strict";function t(n,i){if(document.body.style.maxHeight===undefined)return null;if(!this||this.options!==t.prototype.options)return new t(n,i);if(!n||!n.length){this.console.log("blueimp Gallery: No or empty list provided as first argument.",n);return}this.list=n;this.num=n.length;this.initOptions(i);this.initialize()}return n.extend(t.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",slideClass:"slide",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",urlProperty:"href",srcsetProperty:"urlset",displayTransition:!0,clearSlides:!0,stretchImages:!1,toggleControlsOnReturn:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,index:0,preloadRange:2,transitionSpeed:400,slideshowTransitionSpeed:undefined,event:undefined,onopen:undefined,onopened:undefined,onslide:undefined,onslideend:undefined,onslidecomplete:undefined,onclose:undefined,onclosed:undefined},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnReturn:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&typeof window.console.log=="function"?window.console:{log:function(){}},support:function(t){function f(){var n=i.transition,r,u;document.body.appendChild(t);n&&(r=n.name.slice(0,-9)+"ransform",t.style[r]!==undefined&&(t.style[r]="translateZ(0)",u=window.getComputedStyle(t).getPropertyValue(n.prefix+"transform"),i.transform={prefix:n.prefix,name:r,translate:!0,translateZ:!!u&&u!=="none"}));t.style.backgroundSize!==undefined&&(i.backgroundSize={},t.style.backgroundSize="contain",i.backgroundSize.contain=window.getComputedStyle(t).getPropertyValue("background-size")==="contain",t.style.backgroundSize="cover",i.backgroundSize.cover=window.getComputedStyle(t).getPropertyValue("background-size")==="cover");document.body.removeChild(t)}var i={touch:window.ontouchstart!==undefined||window.DocumentTouch&&document instanceof DocumentTouch},u={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(var r in u)if(u.hasOwnProperty(r)&&t.style[r]!==undefined){i.transition=u[r];i.transition.name=r;break}if(document.body)f();else n(document).on("DOMContentLoaded",f);return i}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,initialize:function(){if(this.initStartIndex(),this.initWidget()===!1)return!1;this.initEventListeners();this.onslide(this.index);this.ontransitionend();this.options.startSlideshow&&this.play()},slide:function(n,t){window.clearTimeout(this.timeout);var r=this.index,i,f,u;if(r!==n&&this.num!==1){if(t||(t=this.options.transitionSpeed),this.support.transform){for(this.options.continuous||(n=this.circle(n)),i=Math.abs(r-n)/(r-n),this.options.continuous&&(f=i,i=-this.positions[this.circle(n)]/this.slideWidth,i!==f&&(n=-i*this.num+n)),u=Math.abs(r-n)-1;u;)u-=1,this.move(this.circle((n>r?n:r)-u-1),this.slideWidth*i,0);n=this.circle(n);this.move(r,this.slideWidth*i,t);this.move(n,0,t);this.options.continuous&&this.move(this.circle(n-i),-(this.slideWidth*i),0)}else n=this.circle(n),this.animate(r*-this.slideWidth,n*-this.slideWidth,t);this.onslide(n)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(n){var t=this;window.clearTimeout(this.timeout);this.interval=n||this.options.slideshowInterval;this.elements[this.index]>1&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(n,i){t.animationFrameId=t.requestAnimationFrame.call(window,function(){t.slide(n,i)})},[this.index+1,this.options.slideshowTransitionSpeed],this.interval));this.container.addClass(this.options.playingClass)},pause:function(){window.clearTimeout(this.timeout);this.interval=null;this.cancelAnimationFrame&&(this.cancelAnimationFrame.call(window,this.animationFrameId),this.animationFrameId=null);this.container.removeClass(this.options.playingClass)},add:function(n){var t;for(n.concat||(n=Array.prototype.slice.call(n)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(n),this.num=this.list.length,this.num>2&&this.options.continuous===null&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),t=this.num-n.length;t<this.num;t+=1)this.addSlide(t),this.positionSlide(t);this.positions.length=this.num;this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty();this.unloadAllSlides();this.slides=[]},handleClose:function(){var n=this.options;this.destroyEventListeners();this.pause();this.container[0].style.display="none";this.container.removeClass(n.displayClass).removeClass(n.singleClass).removeClass(n.leftEdgeClass).removeClass(n.rightEdgeClass);n.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle);this.options.clearSlides&&this.resetSlides();this.options.onclosed&&this.options.onclosed.call(this)},close:function(){function t(i){i.target===n.container[0]&&(n.container.off(n.support.transition.end,t),n.handleClose())}var n=this;if(this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition){this.container.on(this.support.transition.end,t);this.container.removeClass(this.options.displayClass)}else this.handleClose()},circle:function(n){return(this.num+n%this.num)%this.num},move:function(n,t,i){this.translateX(n,t,i);this.positions[n]=t},translate:function(n,t,i,r){var u=this.slides[n].style,e=this.support.transition,f=this.support.transform;u[e.name+"Duration"]=r+"ms";u[f.name]="translate("+t+"px, "+i+"px)"+(f.translateZ?" translateZ(0)":"")},translateX:function(n,t,i){this.translate(n,t,0,i)},translateY:function(n,t,i){this.translate(n,0,t,i)},animate:function(n,t,i){if(!i){this.slidesContainer[0].style.left=t+"px";return}var r=this,u=(new Date).getTime(),f=window.setInterval(function(){var e=(new Date).getTime()-u;if(e>i){r.slidesContainer[0].style.left=t+"px";r.ontransitionend();window.clearInterval(f);return}r.slidesContainer[0].style.left=(t-n)*(Math.floor(e/i*100)/100)+n+"px"},4)},preventDefault:function(n){n.preventDefault?n.preventDefault():n.returnValue=!1},stopPropagation:function(n){n.stopPropagation?n.stopPropagation():n.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onmousedown:function(n){if(n.which&&n.which===1&&n.target.nodeName!=="VIDEO"){n.preventDefault();(n.originalEvent||n).touches=[{pageX:n.pageX,pageY:n.pageY}];this.ontouchstart(n)}},onmousemove:function(n){if(this.touchStart){(n.originalEvent||n).touches=[{pageX:n.pageX,pageY:n.pageY}];this.ontouchmove(n)}},onmouseup:function(n){if(this.touchStart){this.ontouchend(n);delete this.touchStart}},onmouseout:function(t){if(this.touchStart){var r=t.target,i=t.relatedTarget;if(!i||i!==r&&!n.contains(r,i))this.onmouseup(t)}},ontouchstart:function(n){this.options.stopTouchEventsPropagation&&this.stopPropagation(n);var t=(n.originalEvent||n).touches[0];this.touchStart={x:t.pageX,y:t.pageY,time:Date.now()};this.isScrolling=undefined;this.touchDelta={}},ontouchmove:function(n){this.options.stopTouchEventsPropagation&&this.stopPropagation(n);var u=(n.originalEvent||n).touches[0],f=(n.originalEvent||n).scale,t=this.index,i,r;if(!(u.length>1)&&(!f||f===1))if(this.options.disableScroll&&n.preventDefault(),this.touchDelta={x:u.pageX-this.touchStart.x,y:u.pageY-this.touchStart.y},i=this.touchDelta.x,this.isScrolling===undefined&&(this.isScrolling=this.isScrolling||Math.abs(i)<Math.abs(this.touchDelta.y)),this.isScrolling)this.translateY(t,this.touchDelta.y+this.positions[t],0);else for(n.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?r=[this.circle(t+1),t,this.circle(t-1)]:(this.touchDelta.x=i=i/(!t&&i>0||t===this.num-1&&i<0?Math.abs(i)/this.slideWidth+1:1),r=[t],t&&r.push(t-1),t<this.num-1&&r.unshift(t+1));r.length;)t=r.pop(),this.translateX(t,i+this.positions[t],0)},ontouchend:function(n){this.options.stopTouchEventsPropagation&&this.stopPropagation(n);var t=this.index,i=this.options.transitionSpeed,r=this.slideWidth,s=Number(Date.now()-this.touchStart.time)<250,h=s&&Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.x)>r/2,c=!t&&this.touchDelta.x>0||t===this.num-1&&this.touchDelta.x<0,a=!h&&this.options.closeOnSwipeUpOrDown&&(s&&Math.abs(this.touchDelta.y)>20||Math.abs(this.touchDelta.y)>this.slideHeight/2),u,f,o,e,l;if(this.options.continuous&&(c=!1),u=this.touchDelta.x<0?-1:1,this.isScrolling)a?this.close():this.translateY(t,0,i);else if(h&&!c){f=t+u;o=t-u;e=r*u;l=-r*u;this.options.continuous?(this.move(this.circle(f),e,0),this.move(this.circle(t-2*u),l,0)):f>=0&&f<this.num&&this.move(f,e,0);this.move(t,this.positions[t]+e,i);this.move(this.circle(o),this.positions[this.circle(o)]+e,i);t=this.circle(o);this.onslide(t)}else this.options.continuous?(this.move(this.circle(t-1),-r,i),this.move(t,0,i),this.move(this.circle(t+1),r,i)):(t&&this.move(t-1,-r,i),this.move(t,0,i),t<this.num-1&&this.move(t+1,r,i))},ontouchcancel:function(n){if(this.touchStart){this.ontouchend(n);delete this.touchStart}},ontransitionend:function(n){var t=this.slides[this.index];n&&t!==n.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,t]))},oncomplete:function(t){var r=t.target||t.srcElement,i=r&&r.parentNode,u;r&&i&&(u=this.getNodeIndex(i),n(i).removeClass(this.options.slideLoadingClass),t.type==="error"?(n(i).addClass(this.options.slideErrorClass),this.elements[u]=3):this.elements[u]=2,r.clientHeight>this.container[0].clientHeight&&(r.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===i&&this.play(),this.setTimeout(this.options.onslidecomplete,[u,i]))},onload:function(n){this.oncomplete(n)},onerror:function(n){this.oncomplete(n)},onkeydown:function(n){switch(n.which||n.keyCode){case 13:this.options.toggleControlsOnReturn&&(this.preventDefault(n),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),n.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(n),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(n),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(n),this.next())}},handleClick:function(t){function r(t){return n(f).hasClass(t)||n(u).hasClass(t)}var i=this.options,f=t.target||t.srcElement,u=f.parentNode;r(i.toggleClass)?(this.preventDefault(t),this.toggleControls()):r(i.prevClass)?(this.preventDefault(t),this.prev()):r(i.nextClass)?(this.preventDefault(t),this.next()):r(i.closeClass)?(this.preventDefault(t),this.close()):r(i.playPauseClass)?(this.preventDefault(t),this.toggleSlideshow()):u===this.slidesContainer[0]?i.closeOnSlideClick?(this.preventDefault(t),this.close()):i.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls()):u.parentNode&&u.parentNode===this.slidesContainer[0]&&i.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls())},onclick:function(n){if(this.options.emulateTouchEvents&&this.touchDelta&&(Math.abs(this.touchDelta.x)>20||Math.abs(this.touchDelta.y)>20)){delete this.touchDelta;return}return this.handleClick(n)},updateEdgeClasses:function(n){n?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass);n===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},handleSlide:function(n){this.options.continuous||this.updateEdgeClasses(n);this.loadElements(n);this.options.unloadElements&&this.unloadElements(n);this.setTitle(n)},onslide:function(n){this.index=n;this.handleSlide(n);this.setTimeout(this.options.onslide,[n,this.slides[n]])},setTitle:function(n){var t=this.slides[n].firstChild,i=t.title||t.alt,r=this.titleElement;r.length&&(this.titleElement.empty(),i&&r[0].appendChild(document.createTextNode(i)))},setTimeout:function(n,t,i){var r=this;return n&&window.setTimeout(function(){n.apply(r,t||[])},i||0)},imageFactory:function(t,i){function s(t){if(!h){if(t={type:t.type,target:u},!u.parentNode)return c.setTimeout(s,[t]);h=!0;n(f).off("load error",s);r&&t.type==="load"&&(u.style.background='url("'+e+'") center no-repeat',u.style.backgroundSize=r);i(t)}}var c=this,f=this.imagePrototype.cloneNode(!1),e=t,r=this.options.stretchImages,h,u,o;typeof e!="string"&&(e=this.getItemProperty(t,this.options.urlProperty),o=this.getItemProperty(t,this.options.titleProperty));r===!0&&(r="contain");r=this.support.backgroundSize&&this.support.backgroundSize[r]&&r;r?u=this.elementPrototype.cloneNode(!1):(u=f,f.draggable=!1);o&&(u.title=o);n(f).on("load error",s);return f.src=e,u},createElement:function(t,i){var u=t&&this.getItemProperty(t,this.options.typeProperty),e=u&&this[u.split("/")[0]+"Factory"]||this.imageFactory,r=t&&e.call(this,t,i),f=this.getItemProperty(t,this.options.srcsetProperty);return r||(r=this.elementPrototype.cloneNode(!1),this.setTimeout(i,[{type:"error",target:r}])),f&&r.setAttribute("srcset",f),n(r).addClass(this.options.slideContentClass),r},loadElement:function(t){this.elements[t]||(this.slides[t].firstChild?this.elements[t]=n(this.slides[t]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[t]=1,n(this.slides[t]).addClass(this.options.slideLoadingClass),this.slides[t].appendChild(this.createElement(this.list[t],this.proxyListener))))},loadElements:function(n){for(var r=Math.min(this.num,this.options.preloadRange*2+1),i=n,t=0;t<r;t+=1)i+=t*(t%2==0?-1:1),i=this.circle(i),this.loadElement(i)},unloadElements:function(n){var t,i;for(t in this.elements)this.elements.hasOwnProperty(t)&&(i=Math.abs(n-t),i>this.options.preloadRange&&i+this.options.preloadRange<this.num&&(this.unloadSlide(t),delete this.elements[t]))},addSlide:function(n){var t=this.slidePrototype.cloneNode(!1);t.setAttribute("data-index",n);this.slidesContainer[0].appendChild(t);this.slides.push(t)},positionSlide:function(n){var t=this.slides[n];t.style.width=this.slideWidth+"px";this.support.transform&&(t.style.left=n*-this.slideWidth+"px",this.move(n,this.index>n?-this.slideWidth:this.index<n?this.slideWidth:0,0))},initSlides:function(t){var r,i;for(t||(this.positions=[],this.positions.length=this.num,this.elements={},this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=document.createElement("div"),n(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,r=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].offsetWidth,this.slideHeight=this.container[0].offsetHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",r&&this.resetSlides(),i=0;i<this.num;i+=1)r&&this.addSlide(i),this.positionSlide(i);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0));this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},unloadSlide:function(n){var t,i;t=this.slides[n];i=t.firstChild;i!==null&&t.removeChild(i)},unloadAllSlides:function(){for(var n=0,t=this.slides.length;n<t;n++)this.unloadSlide(n)},toggleControls:function(){var n=this.options.controlsClass;this.container.hasClass(n)?this.container.removeClass(n):this.container.addClass(n)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(n){return parseInt(n.getAttribute("data-index"),10)},getNestedProperty:function(n,t){return t.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(t,i,r,u,f){var e=f||i||r||u&&parseInt(u,10);t&&n&&(n=n[e])}),n},getDataProperty:function(t,i){var u,r;if(t.dataset?(u=i.replace(/-([a-z])/g,function(n,t){return t.toUpperCase()}),r=t.dataset[u]):t.getAttribute&&(r=t.getAttribute("data-"+i.replace(/([A-Z])/g,"-$1").toLowerCase())),typeof r=="string"){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(r))try{return n.parseJSON(r)}catch(f){}return r}},getItemProperty:function(n,t){var i=this.getDataProperty(n,t);return i===undefined&&(i=n[t]),i===undefined&&(i=this.getNestedProperty(n,t)),i},initStartIndex:function(){var n=this.options.index,i=this.options.urlProperty,t;if(n&&typeof n!="number")for(t=0;t<this.num;t+=1)if(this.list[t]===n||this.getItemProperty(this.list[t],i)===this.getItemProperty(n,i)){n=t;break}this.index=this.circle(parseInt(n,10)||0)},initEventListeners:function(){function t(n){var t=i.support.transition&&i.support.transition.end===n.type?"transitionend":n.type;i["on"+t](n)}var i=this,r=this.slidesContainer;n(window).on("resize",t);n(document.body).on("keydown",t);this.container.on("click",t);if(this.support.touch)r.on("touchstart touchmove touchend touchcancel",t);else if(this.options.emulateTouchEvents&&this.support.transition)r.on("mousedown mousemove mouseup mouseout",t);if(this.support.transition)r.on(this.support.transition.end,t);this.proxyListener=t},destroyEventListeners:function(){var i=this.slidesContainer,t=this.proxyListener;n(window).off("resize",t);n(document.body).off("keydown",t);this.container.off("click",t);this.support.touch?i.off("touchstart touchmove touchend touchcancel",t):this.options.emulateTouchEvents&&this.support.transition&&i.off("mousedown mousemove mouseup mouseout",t);this.support.transition&&i.off(this.support.transition.end,t)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){function i(n){n.target===t.container[0]&&(t.container.off(t.support.transition.end,i),t.handleOpen())}var t=this;if(this.container=n(this.options.container),!this.container.length)return this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1;if(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),!this.slidesContainer.length)return this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1;if(this.titleElement=this.container.find(this.options.titleElement).first(),this.num===1&&this.container.addClass(this.options.singleClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition)this.container.on(this.support.transition.end,i);else this.handleOpen();this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden");this.container[0].style.display="block";this.initSlides();this.container.addClass(this.options.displayClass)},initOptions:function(t){this.options=n.extend({},this.options);(t&&t.carousel||this.options.carousel&&(!t||t.carousel!==!1))&&n.extend(this.options,this.carouselOptions);n.extend(this.options,t);this.num<3&&(this.options.continuous=this.options.continuous?null:!1);this.support.transition||(this.options.emulateTouchEvents=!1);this.options.event&&this.preventDefault(this.options.event)}}),t}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?n(require("jquery")):n(window.jQuery)}(function(n){"use strict";var t=0,i=n,r="parseJSON";"JSON"in window&&"parse"in JSON&&(i=JSON,r="parse");n.ajaxTransport("iframe",function(i){if(i.async){var e=i.initialIframeSrc||"javascript:false;",r,u,f;return{send:function(o,s){r=n('<form style="display:none;"><\/form>');r.attr("accept-charset",i.formAcceptCharset);f=/\?/.test(i.url)?"&":"?";i.type==="DELETE"?(i.url=i.url+f+"_method=DELETE",i.type="POST"):i.type==="PUT"?(i.url=i.url+f+"_method=PUT",i.type="POST"):i.type==="PATCH"&&(i.url=i.url+f+"_method=PATCH",i.type="POST");t+=1;u=n('<iframe src="'+e+'" name="iframe-transport-'+t+'"><\/iframe>').bind("load",function(){var t,f=n.isArray(i.paramName)?i.paramName:[i.paramName];u.unbind("load").bind("load",function(){var t;try{if(t=u.contents(),!t.length||!t[0].firstChild)throw new Error;}catch(i){t=undefined}s(200,"success",{iframe:t});n('<iframe src="'+e+'"><\/iframe>').appendTo(r);window.setTimeout(function(){r.remove()},0)});r.prop("target",u.prop("name")).prop("action",i.url).prop("method",i.type);i.formData&&n.each(i.formData,function(t,i){n('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(r)});i.fileInput&&i.fileInput.length&&i.type==="POST"&&(t=i.fileInput.clone(),i.fileInput.after(function(n){return t[n]}),i.paramName&&i.fileInput.each(function(t){n(this).prop("name",f[t]||i.paramName)}),r.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form"));r.submit();t&&t.length&&i.fileInput.each(function(i,r){var u=n(t[i]);n(r).prop("name",u.prop("name")).attr("form",u.attr("form"));u.replaceWith(r)})});r.append(u).appendTo(document.body)},abort:function(){u&&u.unbind("load").prop("src",e);r&&r.remove()}}}});n.ajaxSetup({converters:{"iframe text":function(t){return t&&n(t[0].body).text()},"iframe json":function(t){return t&&i[r](n(t[0].body).text())},"iframe html":function(t){return t&&n(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&n.isXMLDoc(i)?i:n.parseXML(i.XMLDocument&&i.XMLDocument.xml||n(i.body).html())},"iframe script":function(t){return t&&n.globalEval(n(t[0].body).text())}}})}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","jquery-ui/ui/widget"],n):typeof exports=="object"?n(require("jquery"),require("./vendor/jquery.ui.widget")):n(window.jQuery)}(function(n){"use strict";function t(t){var i=t==="dragover";return function(r){r.dataTransfer=r.originalEvent&&r.originalEvent.dataTransfer;var u=r.dataTransfer;u&&n.inArray("Files",u.types)!==-1&&this._trigger(t,n.Event(t,{delegatedEvent:r}))!==!1&&(r.preventDefault(),i&&(u.dropEffect="copy"))}}n.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||n('<input type="file">').prop("disabled"));n.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);n.support.xhrFormDataFileUpload=!!window.FormData;n.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);n.widget("blueimp.fileupload",{options:{dropZone:n(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&n.each(i,function(n,i){t=t.replace("{"+n+"}",i)}),t},formData:function(n){return n.serializeArray()},add:function(t,i){if(t.isDefaultPrevented())return!1;(i.autoUpload||i.autoUpload!==!1&&n(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:n.support.blobSlice&&function(){var n=this.slice||this.webkitSlice||this.mozSlice;return n.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.loaded=0;this.bitrate=0;this.getBitrate=function(n,t,i){var r=n-this.timestamp;return(!this.bitrate||!i||r>i)&&(this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=n),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&n.support.xhrFileUpload||n.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return n.type(t.formData)==="function"?t.formData(t.form):n.isArray(t.formData)?t.formData:n.type(t.formData)==="object"?(i=[],n.each(t.formData,function(n,t){i.push({name:n,value:t})}),i):[]},_getTotal:function(t){var i=0;return n.each(t,function(n,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?n.extend(t._progress,i):t._progress=i},_initResponseObject:function(n){var t;if(n._response)for(t in n._response)n._response.hasOwnProperty(t)&&delete n._response[t];else n._response={}},_onProgress:function(t,i){if(t.lengthComputable){var r=Date.now?Date.now():(new Date).getTime(),u;if(i._time&&i.progressInterval&&r-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=r;u=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0);this._progress.loaded+=u-i._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,i.bitrateInterval);i._progress.loaded=i.loaded=u;i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(r,u,i.bitrateInterval);this._trigger("progress",n.Event("progress",{delegatedEvent:t}),i);this._trigger("progressall",n.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var r=this,i=t.xhr?t.xhr():n.ajaxSettings.xhr();i.upload&&(n(i.upload).bind("progress",function(n){var i=n.originalEvent;n.lengthComputable=i.lengthComputable;n.loaded=i.loaded;n.total=i.total;r._onProgress(n,t)}),t.xhr=function(){return i})},_isInstanceOf:function(n,t){return Object.prototype.toString.call(t)==="[object "+n+"]"},_initXHRData:function(t){var f=this,i,r=t.files[0],e=t.multipart||!n.support.xhrFileUpload,u=n.type(t.paramName)==="array"?t.paramName[0]:t.paramName;t.headers=n.extend({},t.headers);t.contentRange&&(t.headers["Content-Range"]=t.contentRange);e&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"');e?n.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:u,value:t.blob}):n.each(t.files,function(r,f){i.push({name:n.type(t.paramName)==="array"&&t.paramName[r]||u,value:f})})):(f._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,n.each(this._getFormData(t),function(n,t){i.append(t.name,t.value)})),t.blob?i.append(u,t.blob,r.name):n.each(t.files,function(r,e){(f._isInstanceOf("File",e)||f._isInstanceOf("Blob",e))&&i.append(n.type(t.paramName)==="array"&&t.paramName[r]||u,e,e.uploadName||e.name)})),t.data=i):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r);t.blob=null},_initIframeSettings:function(t){var i=n("<a><\/a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||"");t.formData=this._getFormData(t);t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(n){this._isXHRUpload(n)?(this._chunkedUpload(n,!0)||(n.data||this._initXHRData(n),this._initProgressListener(n)),n.postMessage&&(n.dataType="postmessage "+(n.dataType||""))):this._initIframeSettings(n)},_getParamName:function(t){var r=n(t.fileInput),i=t.paramName;return i?n.isArray(i)||(i=[i]):(i=[],r.each(function(){for(var t=n(this),u=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)i.push(u),r-=1}),i.length||(i=[r.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=n(t.fileInput.prop("form")),t.form.length||(t.form=n(this.options.fileInput.prop("form"))));t.paramName=this._getParamName(t);t.url||(t.url=t.form.prop("action")||location.href);t.type=(t.type||n.type(t.form.prop("method"))==="string"&&t.form.prop("method")||"").toUpperCase();t.type!=="POST"&&t.type!=="PUT"&&t.type!=="PATCH"&&(t.type="POST");t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=n.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(n){return n.state?n.state():n.isResolved()?"resolved":n.isRejected()?"rejected":"pending"},_enhancePromise:function(n){return n.success=n.done,n.error=n.fail,n.complete=n.always,n},_getXHRPromise:function(t,i,r){var u=n.Deferred(),f=u.promise();return i=i||this.options.context||f,t===!0?u.resolveWith(i,r):t===!1&&u.rejectWith(i,r),f.abort=u.promise,this._enhancePromise(f)},_addConvenienceMethods:function(t,i){var r=this,u=function(t){return n.Deferred().resolveWith(r,t).promise()};i.process=function(t,f){return(t||f)&&(i._processQueue=this._processQueue=(this._processQueue||u([this])).then(function(){return i.errorThrown?n.Deferred().rejectWith(r,[i]).promise():u(arguments)}).then(t,f)),this._processQueue||u([this])};i.submit=function(){return this.state()!=="pending"&&(i.jqXHR=this.jqXHR=r._trigger("submit",n.Event("submit",{delegatedEvent:t}),this)!==!1&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()};i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",r._trigger("fail",null,this),r._getXHRPromise(!1))};i.state=function(){return this.jqXHR?r._getDeferredState(this.jqXHR):this._processQueue?r._getDeferredState(this._processQueue):void 0};i.processing=function(){return!this.jqXHR&&this._processQueue&&r._getDeferredState(this._processQueue)==="pending"};i.progress=function(){return this._progress};i.response=function(){return this._response}},_getUploadedBytes:function(n){var i=n.getResponseHeader("Range"),t=i&&i.split("-"),r=t&&t.length>1&&parseInt(t[1],10);return r&&r+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var u=this,f=t.files[0],e=f.size,r=t.uploadedBytes,c=t.maxChunkSize||e,l=this._blobSlice,o=n.Deferred(),s=o.promise(),a,h;return!(this._isXHRUpload(t)&&l&&(r||c<e))||t.data?!1:i?!0:r>=e?(f.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",f.error])):(h=function(){var i=n.extend({},t),s=i._progress.loaded;i.blob=l.call(f,r,r+c,f.type);i.chunkSize=i.blob.size;i.contentRange="bytes "+r+"-"+(r+i.chunkSize-1)+"/"+e;u._initXHRData(i);u._initProgressListener(i);a=(u._trigger("chunksend",null,i)!==!1&&n.ajax(i)||u._getXHRPromise(!1,i.context)).done(function(f,c,l){r=u._getUploadedBytes(l)||r+i.chunkSize;s+i.chunkSize-i._progress.loaded&&u._onProgress(n.Event("progress",{lengthComputable:!0,loaded:r-i.uploadedBytes,total:r-i.uploadedBytes}),i);t.uploadedBytes=i.uploadedBytes=r;i.result=f;i.textStatus=c;i.jqXHR=l;u._trigger("chunkdone",null,i);u._trigger("chunkalways",null,i);r<e?h():o.resolveWith(i.context,[f,c,l])}).fail(function(n,t,r){i.jqXHR=n;i.textStatus=t;i.errorThrown=r;u._trigger("chunkfail",null,i);u._trigger("chunkalways",null,i);o.rejectWith(i.context,[n,t,r])})},this._enhancePromise(s),s.abort=function(){return a.abort()},h(),s)},_beforeSend:function(n,t){this._active===0&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0);this._initResponseObject(t);this._initProgressObject(t);t._progress.loaded=t.loaded=t.uploadedBytes||0;t._progress.total=t.total=this._getTotal(t.files)||1;t._progress.bitrate=t.bitrate=0;this._active+=1;this._progress.loaded+=t.loaded;this._progress.total+=t.total},_onDone:function(t,i,r,u){var f=u._progress.total,e=u._response;u._progress.loaded<f&&this._onProgress(n.Event("progress",{lengthComputable:!0,loaded:f,total:f}),u);e.result=u.result=t;e.textStatus=u.textStatus=i;e.jqXHR=u.jqXHR=r;this._trigger("done",null,u)},_onFail:function(n,t,i,r){var u=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total);u.jqXHR=r.jqXHR=n;u.textStatus=r.textStatus=t;u.errorThrown=r.errorThrown=i;this._trigger("fail",null,r)},_onAlways:function(n,t,i,r){this._trigger("always",null,r)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var r=this,f,s,e,h,u=r._getAJAXSettings(i),o=function(){return r._sending+=1,u._bitrateTimer=new r._BitrateTimer,f=f||((s||r._trigger("send",n.Event("send",{delegatedEvent:t}),u)===!1)&&r._getXHRPromise(!1,u.context,s)||r._chunkedUpload(u)||n.ajax(u)).done(function(n,t,i){r._onDone(n,t,i,u)}).fail(function(n,t,i){r._onFail(n,t,i,u)}).always(function(n,t,i){if(r._onAlways(n,t,i,u),r._sending-=1,r._active-=1,u.limitConcurrentUploads&&u.limitConcurrentUploads>r._sending)for(var f=r._slots.shift();f;){if(r._getDeferredState(f)==="pending"){f.resolve();break}f=r._slots.shift()}r._active===0&&r._trigger("stop")})};return(this._beforeSend(t,u),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)?(this.options.limitConcurrentUploads>1?(e=n.Deferred(),this._slots.push(e),h=e.then(o)):(this._sequence=this._sequence.then(o,o),h=this._sequence),h.abort=function(){return(s=[undefined,"abort","abort"],!f)?(e&&e.rejectWith(u.context,s),o()):f.abort()},this._enhancePromise(h)):o()},_onAdd:function(t,i){var a=this,p=!0,f=n.extend({},this.options,i),u=i.files,v=u.length,o=f.limitMultiFileUploads,c=f.limitMultiFileUploadSize,b=f.limitMultiFileUploadSizeOverhead,w=0,l=this._getParamName(f),s,e,h,r,y=0;if(!v)return!1;if(c&&u[0].size===undefined&&(c=undefined),(f.singleFileUploads||o||c)&&this._isXHRUpload(f))if(f.singleFileUploads||c||!o)if(!f.singleFileUploads&&c)for(h=[],s=[],r=0;r<v;r=r+1)w+=u[r].size+b,(r+1===v||w+u[r+1].size+b>c||o&&r+1-y>=o)&&(h.push(u.slice(y,r+1)),e=l.slice(y,r+1),e.length||(e=l),s.push(e),y=r+1,w=0);else s=l;else for(h=[],s=[],r=0;r<v;r+=o)h.push(u.slice(r,r+o)),e=l.slice(r,r+o),e.length||(e=l),s.push(e);else h=[u],s=[l];return i.originalFiles=u,n.each(h||u,function(r,u){var f=n.extend({},i);return f.files=h?u:[u],f.paramName=s[r],a._initResponseObject(f),a._initProgressObject(f),a._addConvenienceMethods(t,f),p=a._trigger("add",n.Event("add",{delegatedEvent:t}),f)}),p},_replaceFileInput:function(t){var i=t.fileInput,r=i.clone(!0),u=i.is(document.activeElement);t.fileInputClone=r;n("<form><\/form>").append(r)[0].reset();i.after(r).detach();u&&r.focus();n.cleanData(i.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(n,t){return t===i[0]?r[0]:t});i[0]===this.element[0]&&(this.element=r)},_handleFileTreeEntry:function(t,i){var s=this,r=n.Deferred(),u=[],e,f=function(n){n&&!n.entry&&(n.entry=t);r.resolve([n])},h=function(n){s._handleFileTreeEntries(n,i+t.name+"/").done(function(n){r.resolve(n)}).fail(f)},o=function(){e.readEntries(function(n){n.length?(u=u.concat(n),o()):h(u)},f)};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,r.resolve(t._file)):t.file(function(n){n.relativePath=i;r.resolve(n)},f):t.isDirectory?(e=t.createReader(),o()):r.resolve([]),r.promise()},_handleFileTreeEntries:function(t,i){var r=this;return n.when.apply(n,n.map(t,function(n){return r._handleFileTreeEntry(n,i)})).then(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(n.map(i,function(n){var t;return n.webkitGetAsEntry?(t=n.webkitGetAsEntry(),t&&(t._file=n.getAsFile()),t):n.getAsEntry()})):n.Deferred().resolve(n.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=n(t);var r=t.prop("webkitEntries")||t.prop("entries"),i,u;if(r&&r.length)return this._handleFileTreeEntries(r);if(i=n.makeArray(t.prop("files")),i.length)i[0].name===undefined&&i[0].fileName&&n.each(i,function(n,t){t.name=t.fileName;t.size=t.fileSize});else{if(u=t.prop("value"),!u)return n.Deferred().resolve([]).promise();i=[{name:u.replace(/^.*\\/,"")}]}return n.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return!(t instanceof n)||t.length===1?this._getSingleFileInputFiles(t):n.when.apply(n,n.map(t,this._getSingleFileInputFiles)).then(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(t){var r=this,i={fileInput:n(t.target),form:n(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(u){i.files=u;r.options.replaceFileInput&&r._replaceFileInput(i);r._trigger("change",n.Event("change",{delegatedEvent:t}),i)!==!1&&r._onAdd(t,i)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};i&&i.length&&(n.each(i,function(n,t){var i=t.getAsFile&&t.getAsFile();i&&r.files.push(i)}),this._trigger("paste",n.Event("paste",{delegatedEvent:t}),r)!==!1&&this._onAdd(t,r))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var u=this,i=t.dataTransfer,r={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i;u._trigger("drop",n.Event("drop",{delegatedEvent:t}),r)!==!1&&u._onAdd(t,r)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste}));n.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(t,i){var r=n.inArray(t,this._specialOptions)!==-1;r&&this._destroyEventHandlers();this._super(t,i);r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;t.fileInput===undefined?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof n||(t.fileInput=n(t.fileInput));t.dropZone instanceof n||(t.dropZone=n(t.dropZone));t.pasteZone instanceof n||(t.pasteZone=n(t.pasteZone))},_getRegExp:function(n){var t=n.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return t!=="url"&&n.type(i)==="string"&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,r=this.element.data();n.each(this.element[0].attributes,function(n,u){var f=u.name.toLowerCase(),e;/^data-/.test(f)&&(f=f.slice(5).replace(/-[a-z]/g,function(n){return n.charAt(1).toUpperCase()}),e=r[f],t._isRegExpOption(f,e)&&(e=t._getRegExp(e)),i[f]=e)})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(n){t.files=n;i._onAdd(null,t)}):(t.files=n.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var e=this,i=n.Deferred(),u=i.promise(),r,f;return u.abort=function(){return(f=!0,r)?r.abort():(i.reject(null,"abort","abort"),u)},this._getFileInputFiles(t.fileInput).always(function(n){if(!f){if(!n.length){i.reject();return}t.files=n;r=e._onSend(null,t);r.then(function(n,t,r){i.resolve(n,t,r)},function(n,t,r){i.reject(n,t,r)})}}),this._enhancePromise(u)}if(t.files=n.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","./jquery.fileupload"],n):typeof exports=="object"?n(require("jquery"),require("./jquery.fileupload")):n(window.jQuery)}(function(n){"use strict";var t=n.blueimp.fileupload.prototype.options.add;n.widget("blueimp.fileupload",n.blueimp.fileupload,{options:{processQueue:[],add:function(i,r){var u=n(this);r.process(function(){return u.fileupload("process",r)});t.call(this,i,r)}},processActions:{},_processFile:function(t,i){var r=this,f=n.Deferred().resolveWith(r,[t]),u=f.promise();return this._trigger("process",null,t),n.each(t.processQueue,function(t,f){var e=function(t){return i.errorThrown?n.Deferred().rejectWith(r,[i]).promise():r.processActions[f.action].call(r,t,f)};u=u.then(e,f.always&&e)}),u.done(function(){r._trigger("processdone",null,t);r._trigger("processalways",null,t)}).fail(function(){r._trigger("processfail",null,t);r._trigger("processalways",null,t)}),u},_transformProcessQueue:function(t){var i=[];n.each(t.processQueue,function(){var r={},f=this.action,u=this.prefix===!0?f:this.prefix;n.each(this,function(i,f){r[i]=n.type(f)==="string"&&f.charAt(0)==="@"?t[f.slice(1)||(u?u+i.charAt(0).toUpperCase()+i.slice(1):i)]:f});i.push(r)});t.processQueue=i},processing:function(){return this._processing},process:function(t){var i=this,r=n.extend({},this.options,t);return r.processQueue&&r.processQueue.length&&(this._transformProcessQueue(r),this._processing===0&&this._trigger("processstart"),n.each(t.files,function(u){var f=u?n.extend({},r):r,e=function(){return t.errorThrown?n.Deferred().rejectWith(i,[t]).promise():i._processFile(f,t)};f.index=u;i._processing+=1;i._processingQueue=i._processingQueue.then(e,e).always(function(){i._processing-=1;i._processing===0&&i._trigger("processstop")})})),this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=n.Deferred().resolveWith(this).promise()}})}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","load-image","load-image-meta","load-image-scale","load-image-exif","canvas-to-blob","./jquery.fileupload-process"],n):typeof exports=="object"?n(require("jquery"),require("blueimp-load-image/js/load-image"),require("blueimp-load-image/js/load-image-meta"),require("blueimp-load-image/js/load-image-scale"),require("blueimp-load-image/js/load-image-exif"),require("blueimp-canvas-to-blob"),require("./jquery.fileupload-process")):n(window.jQuery,window.loadImage)}(function(n,t){"use strict";n.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"});n.widget("blueimp.fileupload",n.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(i,r){if(r.disabled)return i;var e=this,u=i.files[i.index],f=n.Deferred();return n.type(r.maxFileSize)==="number"&&u.size>r.maxFileSize||r.fileTypes&&!r.fileTypes.test(u.type)||!t(u,function(n){n.src&&(i.img=n);f.resolveWith(e,[i])},r)?i:f.promise()},resizeImage:function(i,r){if(r.disabled||!(i.canvas||i.img))return i;r=n.extend({canvas:!0},r);var s=this,f=n.Deferred(),u=r.canvas&&i.canvas||i.img,o=function(n){n&&(n.width!==u.width||n.height!==u.height||r.forceResize)&&(i[n.getContext?"canvas":"img"]=n);i.preview=n;f.resolveWith(s,[i])},e;if(i.exif){if(r.orientation===!0&&(r.orientation=i.exif.get("Orientation")),r.thumbnail&&(e=i.exif.get("Thumbnail"),e))return t(e,o,r),f.promise();i.orientation?delete r.orientation:i.orientation=r.orientation}return u?(o(t.scale(u,r)),f.promise()):i},saveImage:function(t,i){if(!t.canvas||i.disabled)return t;var f=this,r=t.files[t.index],u=n.Deferred();if(t.canvas.toBlob)t.canvas.toBlob(function(n){n.name||(r.type===n.type?n.name=r.name:r.name&&(n.name=r.name.replace(/\.\w+$/,"."+n.type.substr(6))));r.type!==n.type&&delete t.imageHead;t.files[t.index]=n;u.resolveWith(f,[t])},i.type||r.type,i.quality);else return t;return u.promise()},loadImageMetaData:function(i,r){if(r.disabled)return i;var f=this,u=n.Deferred();return t.parseMetaData(i.files[i.index],function(t){n.extend(i,t);u.resolveWith(f,[i])},r),u.promise()},saveImageMetaData:function(n,t){if(!(n.imageHead&&n.canvas&&n.canvas.toBlob&&!t.disabled))return n;var i=n.files[n.index],r=new Blob([n.imageHead,this._blobSlice.call(i,20)],{type:i.type});return r.name=i.name,n.files[n.index]=r,n},setImage:function(n,t){return n.preview&&!t.disabled&&(n.files[n.index][t.name||"preview"]=n.preview),n},deleteImageReferences:function(n,t){return t.disabled||(delete n.img,delete n.canvas,delete n.preview,delete n.imageHead),n}}})}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],n):typeof exports=="object"?n(require("jquery"),require("blueimp-load-image/js/load-image"),require("./jquery.fileupload-process")):n(window.jQuery,window.loadImage)}(function(n,t){"use strict";n.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"});n.widget("blueimp.fileupload",n.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(i,r){if(r.disabled)return i;var u=i.files[i.index],e,f;return this._audioElement.canPlayType&&this._audioElement.canPlayType(u.type)&&(n.type(r.maxFileSize)!=="number"||u.size<=r.maxFileSize)&&(!r.fileTypes||r.fileTypes.test(u.type))&&(e=t.createObjectURL(u),e)?(f=this._audioElement.cloneNode(!1),f.src=e,f.controls=!0,i.audio=f,i):i},setAudio:function(n,t){return n.audio&&!t.disabled&&(n.files[n.index][t.name||"preview"]=n.audio),n}}})}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],n):typeof exports=="object"?n(require("jquery"),require("blueimp-load-image/js/load-image"),require("./jquery.fileupload-process")):n(window.jQuery,window.loadImage)}(function(n,t){"use strict";n.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"});n.widget("blueimp.fileupload",n.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(i,r){if(r.disabled)return i;var u=i.files[i.index],e,f;return this._videoElement.canPlayType&&this._videoElement.canPlayType(u.type)&&(n.type(r.maxFileSize)!=="number"||u.size<=r.maxFileSize)&&(!r.fileTypes||r.fileTypes.test(u.type))&&(e=t.createObjectURL(u),e)?(f=this._videoElement.cloneNode(!1),f.src=e,f.controls=!0,i.video=f,i):i},setVideo:function(n,t){return n.video&&!t.disabled&&(n.files[n.index][t.name||"preview"]=n.video),n}}})}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","./jquery.fileupload-process"],n):typeof exports=="object"?n(require("jquery"),require("./jquery.fileupload-process")):n(window.jQuery)}(function(n){"use strict";n.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"});n.widget("blueimp.fileupload",n.blueimp.fileupload,{options:{getNumberOfFiles:n.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,i){if(i.disabled)return t;var e=n.Deferred(),u=this.options,r=t.files[t.index],f;return(i.minFileSize||i.maxFileSize)&&(f=r.size),n.type(i.maxNumberOfFiles)==="number"&&(u.getNumberOfFiles()||0)+t.files.length>i.maxNumberOfFiles?r.error=u.i18n("maxNumberOfFiles"):!i.acceptFileTypes||i.acceptFileTypes.test(r.type)||i.acceptFileTypes.test(r.name)?f>i.maxFileSize?r.error=u.i18n("maxFileSize"):n.type(f)==="number"&&f<i.minFileSize?r.error=u.i18n("minFileSize"):delete r.error:r.error=u.i18n("acceptFileTypes"),r.error||t.files.error?(t.files.error=!0,e.rejectWith(this,[t])):e.resolveWith(this,[t]),e.promise()}}})}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","blueimp-tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],n):typeof exports=="object"?n(require("jquery"),require("blueimp-tmpl"),require("./jquery.fileupload-image"),require("./jquery.fileupload-video"),require("./jquery.fileupload-validate")):n(window.jQuery,window.tmpl)}(function(n,t){"use strict";n.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");n.widget("blueimp.fileupload",n.blueimp.fileupload,{options:{autoUpload:!1,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:undefined,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(t){return t.result&&n.isArray(t.result.files)?t.result.files:[]},add:function(t,i){if(t.isDefaultPrevented())return!1;var u=n(this),r=u.data("blueimp-fileupload")||u.data("fileupload"),f=r.options;i.context=r._renderUpload(i.files).data("data",i).addClass("processing");f.filesContainer[f.prependFiles?"prepend":"append"](i.context);r._forceReflow(i.context);r._transition(i.context);i.process(function(){return u.fileupload("process",i)}).always(function(){i.context.each(function(t){n(this).find(".size").text(r._formatFileSize(i.files[t].size))}).removeClass("processing");r._renderPreviews(i)}).done(function(){i.context.find(".start").prop("disabled",!1);r._trigger("added",t,i)!==!1&&(f.autoUpload||i.autoUpload)&&i.autoUpload!==!1&&i.submit()}).fail(function(){i.files.error&&i.context.each(function(t){var r=i.files[t].error;r&&n(this).find(".error").text(r)})})},send:function(t,i){if(t.isDefaultPrevented())return!1;var r=n(this).data("blueimp-fileupload")||n(this).data("fileupload");return i.context&&i.dataType&&i.dataType.substr(0,6)==="iframe"&&i.context.find(".progress").addClass(!n.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%"),r._trigger("sent",t,i)},done:function(t,i){if(t.isDefaultPrevented())return!1;var r=n(this).data("blueimp-fileupload")||n(this).data("fileupload"),o=i.getFilesFromResponse||r.options.getFilesFromResponse,e=o(i),u,f;i.context?i.context.each(function(o){var s=e[o]||{error:"Empty file upload result"};f=r._addFinishedDeferreds();r._transition(n(this)).done(function(){var e=n(this);u=r._renderDownload([s]).replaceAll(e);r._forceReflow(u);r._transition(u).done(function(){i.context=n(this);r._trigger("completed",t,i);r._trigger("finished",t,i);f.resolve()})})}):(u=r._renderDownload(e)[r.options.prependFiles?"prependTo":"appendTo"](r.options.filesContainer),r._forceReflow(u),f=r._addFinishedDeferreds(),r._transition(u).done(function(){i.context=n(this);r._trigger("completed",t,i);r._trigger("finished",t,i);f.resolve()}))},fail:function(t,i){if(t.isDefaultPrevented())return!1;var r=n(this).data("blueimp-fileupload")||n(this).data("fileupload"),f,u;i.context?i.context.each(function(e){if(i.errorThrown!=="abort"){var o=i.files[e];o.error=o.error||i.errorThrown||i.i18n("unknownError");u=r._addFinishedDeferreds();r._transition(n(this)).done(function(){var e=n(this);f=r._renderDownload([o]).replaceAll(e);r._forceReflow(f);r._transition(f).done(function(){i.context=n(this);r._trigger("failed",t,i);r._trigger("finished",t,i);u.resolve()})})}else u=r._addFinishedDeferreds(),r._transition(n(this)).done(function(){n(this).remove();r._trigger("failed",t,i);r._trigger("finished",t,i);u.resolve()})}):i.errorThrown!=="abort"?(i.context=r._renderUpload(i.files)[r.options.prependFiles?"prependTo":"appendTo"](r.options.filesContainer).data("data",i),r._forceReflow(i.context),u=r._addFinishedDeferreds(),r._transition(i.context).done(function(){i.context=n(this);r._trigger("failed",t,i);r._trigger("finished",t,i);u.resolve()})):(r._trigger("failed",t,i),r._trigger("finished",t,i),r._addFinishedDeferreds().resolve())},progress:function(t,i){if(t.isDefaultPrevented())return!1;var r=Math.floor(i.loaded/i.total*100);i.context&&i.context.each(function(){n(this).find(".progress").attr("aria-valuenow",r).children().first().css("width",r+"%")})},progressall:function(t,i){if(t.isDefaultPrevented())return!1;var r=n(this),u=Math.floor(i.loaded/i.total*100),f=r.find(".fileupload-progress"),e=f.find(".progress-extended");e.length&&e.html((r.data("blueimp-fileupload")||r.data("fileupload"))._renderExtendedProgress(i));f.find(".progress").attr("aria-valuenow",u).children().first().css("width",u+"%")},start:function(t){if(t.isDefaultPrevented())return!1;var i=n(this).data("blueimp-fileupload")||n(this).data("fileupload");i._resetFinishedDeferreds();i._transition(n(this).find(".fileupload-progress")).done(function(){i._trigger("started",t)})},stop:function(t){if(t.isDefaultPrevented())return!1;var i=n(this).data("blueimp-fileupload")||n(this).data("fileupload"),r=i._addFinishedDeferreds();n.when.apply(n,i._getFinishedDeferreds()).done(function(){i._trigger("stopped",t)});i._transition(n(this).find(".fileupload-progress")).done(function(){n(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");n(this).find(".progress-extended").html("&nbsp;");r.resolve()})},processstart:function(t){if(t.isDefaultPrevented())return!1;n(this).addClass("fileupload-processing")},processstop:function(t){if(t.isDefaultPrevented())return!1;n(this).removeClass("fileupload-processing")},destroy:function(t,i){if(t.isDefaultPrevented())return!1;var r=n(this).data("blueimp-fileupload")||n(this).data("fileupload"),u=function(){r._transition(i.context).done(function(){n(this).remove();r._trigger("destroyed",t,i)})};i.url?(i.dataType=i.dataType||r.options.dataType,n.ajax(i).done(u).fail(function(){r._trigger("destroyfailed",t,i)})):u()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(t){return t||(t=n.Deferred()),this._finishedUploads.push(t),t},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var t=n(this),i=t.prop("href"),r=t.prop("download"),u="application/octet-stream";t.bind("dragstart",function(n){try{n.originalEvent.dataTransfer.setData("DownloadURL",[u,r,i].join(":"))}catch(t){}})},_formatFileSize:function(n){return typeof n!="number"?"":n>=1e9?(n/1e9).toFixed(2)+" GB":n>=1e6?(n/1e6).toFixed(2)+" MB":(n/1e3).toFixed(2)+" KB"},_formatBitrate:function(n){return typeof n!="number"?"":n>=1e9?(n/1e9).toFixed(2)+" Gbit/s":n>=1e6?(n/1e6).toFixed(2)+" Mbit/s":n>=1e3?(n/1e3).toFixed(2)+" kbit/s":n.toFixed(2)+" bit/s"},_formatTime:function(n){var i=new Date(n*1e3),t=Math.floor(n/86400);return t=t?t+"d ":"",t+("0"+i.getUTCHours()).slice(-2)+":"+("0"+i.getUTCMinutes()).slice(-2)+":"+("0"+i.getUTCSeconds()).slice(-2)},_formatPercentage:function(n){return(n*100).toFixed(2)+" %"},_renderExtendedProgress:function(n){return this._formatBitrate(n.bitrate)+" | "+this._formatTime((n.total-n.loaded)*8/n.bitrate)+" | "+this._formatPercentage(n.loaded/n.total)+" | "+this._formatFileSize(n.loaded)+" / "+this._formatFileSize(n.total)},_renderTemplate:function(t,i){if(!t)return n();var r=t({files:i,formatFileSize:this._formatFileSize,options:this.options});return r instanceof n?r:n(this.options.templatesContainer).html(r).children()},_renderPreviews:function(t){t.context.find(".preview").each(function(i,r){n(r).append(t.files[i].preview)})},_renderUpload:function(n){return this._renderTemplate(this.options.uploadTemplate,n)},_renderDownload:function(n){return this._renderTemplate(this.options.downloadTemplate,n).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(t){t.preventDefault();var r=n(t.currentTarget),u=r.closest(".template-upload"),i=u.data("data");r.prop("disabled",!0);i&&i.submit&&i.submit()},_cancelHandler:function(t){t.preventDefault();var r=n(t.currentTarget).closest(".template-upload,.template-download"),i=r.data("data")||{};i.context=i.context||r;i.abort?i.abort():(i.errorThrown="abort",this._trigger("fail",t,i))},_deleteHandler:function(t){t.preventDefault();var i=n(t.currentTarget);this._trigger("destroy",t,n.extend({context:i.closest(".template-download"),type:"DELETE"},i.data()))},_forceReflow:function(t){return n.support.transition&&t.length&&t[0].offsetWidth},_transition:function(t){var i=n.Deferred();return n.support.transition&&t.hasClass("fade")&&t.is(":visible")?t.bind(n.support.transition.end,function(r){r.target===t[0]&&(t.unbind(n.support.transition.end),i.resolveWith(t))}).toggleClass("in"):(t.toggleClass("in"),i.resolveWith(t)),i},_initButtonBarEventHandlers:function(){var t=this.element.find(".fileupload-buttonbar"),i=this.options.filesContainer;this._on(t.find(".start"),{click:function(n){n.preventDefault();i.find(".start").click()}});this._on(t.find(".cancel"),{click:function(n){n.preventDefault();i.find(".cancel").click()}});this._on(t.find(".delete"),{click:function(n){n.preventDefault();i.find(".toggle:checked").closest(".template-download").find(".delete").click();t.find(".toggle").prop("checked",!1)}});this._on(t.find(".toggle"),{change:function(t){i.find(".toggle").prop("checked",n(t.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var n=this.options;n.templatesContainer=this.document[0].createElement(n.filesContainer.prop("nodeName"));t&&(n.uploadTemplateId&&(n.uploadTemplate=t(n.uploadTemplateId)),n.downloadTemplateId&&(n.downloadTemplate=t(n.downloadTemplateId)))},_initFilesContainer:function(){var t=this.options;t.filesContainer===undefined?t.filesContainer=this.element.find(".files"):t.filesContainer instanceof n||(t.filesContainer=n(t.filesContainer))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();n.support.fileInput||this._disableFileInputButton()},enable:function(){var n=!1;this.options.disabled&&(n=!0);this._super();n&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());this._super()}})}),function(n){"use strict";typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],n):n(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(n,t){"use strict";n.extend(t.prototype.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoPosterProperty:"poster",videoSourcesProperty:"sources"});var i=t.prototype.handleSlide;return n.extend(t.prototype,{handleSlide:function(n){i.call(this,n);this.playingVideo&&this.playingVideo.pause()},videoFactory:function(t,i,r){var u=this,e=this.options,o=this.elementPrototype.cloneNode(!1),a=n(o),d=[{type:"error",target:o}],f=r||document.createElement("video"),s=this.getItemProperty(t,e.urlProperty),c=this.getItemProperty(t,e.typeProperty),y=this.getItemProperty(t,e.titleProperty),p=this.getItemProperty(t,e.videoPosterProperty),l,w=this.getItemProperty(t,e.videoSourcesProperty),b,h,v,k;if(a.addClass(e.videoContentClass),y&&(o.title=y),f.canPlayType)if(s&&c&&f.canPlayType(c))f.src=s;else if(w)while(w.length)if(b=w.shift(),s=this.getItemProperty(b,e.urlProperty),c=this.getItemProperty(b,e.typeProperty),s&&c&&f.canPlayType(c)){f.src=s;break}if(p&&(f.poster=p,l=this.imagePrototype.cloneNode(!1),n(l).addClass(e.toggleClass),l.src=p,l.draggable=!1,o.appendChild(l)),h=document.createElement("a"),h.setAttribute("target","_blank"),r||h.setAttribute("download",y),h.href=s,f.src){f.controls=!0;(r||n(f)).on("error",function(){u.setTimeout(i,d)}).on("pause",function(){f.seeking||(v=!1,a.removeClass(u.options.videoLoadingClass).removeClass(u.options.videoPlayingClass),k&&u.container.addClass(u.options.controlsClass),delete u.playingVideo,u.interval&&u.play())}).on("playing",function(){v=!1;a.removeClass(u.options.videoLoadingClass).addClass(u.options.videoPlayingClass);u.container.hasClass(u.options.controlsClass)?(k=!0,u.container.removeClass(u.options.controlsClass)):k=!1}).on("play",function(){window.clearTimeout(u.timeout);v=!0;a.addClass(u.options.videoLoadingClass);u.playingVideo=f});n(h).on("click",function(n){u.preventDefault(n);v?f.pause():f.play()});o.appendChild(r&&r.element||f)}return o.appendChild(h),this.setTimeout(i,[{type:"load",target:o}]),o}}),t}),function(n){"use strict";typeof define=="function"&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],n):n(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(n,t){"use strict";n.extend(t.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var i=t.prototype.initSlides,r=t.prototype.addSlide,u=t.prototype.resetSlides,f=t.prototype.handleClick,e=t.prototype.handleSlide,o=t.prototype.handleClose;return n.extend(t.prototype,{createIndicator:function(t){var r=this.indicatorPrototype.cloneNode(!1),f=this.getItemProperty(t,this.options.titleProperty),e=this.options.thumbnailProperty,i,u;return this.options.thumbnailIndicators&&(e&&(i=this.getItemProperty(t,e)),i===undefined&&(u=t.getElementsByTagName&&n(t).find("img")[0],u&&(i=u.src)),i&&(r.style.backgroundImage='url("'+i+'")')),f&&(r.title=f),r},addIndicator:function(n){if(this.indicatorContainer.length){var t=this.createIndicator(this.list[n]);t.setAttribute("data-index",n);this.indicatorContainer[0].appendChild(t);this.indicators.push(t)}},setActiveIndicator:function(t){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=n(this.indicators[t]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(n){n||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children));i.call(this,n)},addSlide:function(n){r.call(this,n);this.addIndicator(n)},resetSlides:function(){u.call(this);this.indicatorContainer.empty();this.indicators=[]},handleClick:function(n){var i=n.target||n.srcElement,t=i.parentNode;if(t===this.indicatorContainer[0])this.preventDefault(n),this.slide(this.getNodeIndex(i));else if(t.parentNode===this.indicatorContainer[0])this.preventDefault(n),this.slide(this.getNodeIndex(t));else return f.call(this,n)},handleSlide:function(n){e.call(this,n);this.setActiveIndicator(n)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass);o.call(this)}}),t}),function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery","./blueimp-gallery"],n):n(window.jQuery,window.blueimp.Gallery)}(function(n,t){"use strict";n(document).on("click","[data-gallery]",function(i){var e=n(this).data("gallery"),o=n(e),r=o.length&&o||n(t.prototype.options.container),s={onopen:function(){r.data("gallery",this).trigger("open")},onopened:function(){r.trigger("opened")},onslide:function(){r.trigger("slide",arguments)},onslideend:function(){r.trigger("slideend",arguments)},onslidecomplete:function(){r.trigger("slidecomplete",arguments)},onclose:function(){r.trigger("close")},onclosed:function(){r.trigger("closed").removeData("gallery")}},u=n.extend(r.data(),{container:r[0],index:this,event:i},s),f=n('[data-gallery="'+e+'"]');return u.filter&&(f=f.filter(u.filter)),new t(f,u)})});